@{
    ViewData["Title"] = "Finanzas";
}

<div class="container-fluid">
    <!-- Encabezado del Módulo -->
    <div class="row mb-5 justify-content-center">
        <div class="col-md-8">
            <div class="card shadow-lg">
                <div class="card-header bg-info text-white text-center py-4">
                    <h1 class="display-4 fw-bold">Módulo de Finanzas</h1>
                    <p class="lead">Aquí podrás gestionar las finanzas de la clínica, incluyendo ingresos, egresos, reportes y proformas.</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Opciones de Finanzas -->
    <div class="row mb-4">
        <div class="col-md-12">
            <div class="card shadow-sm">
                <div class="card-body">
                    <h5 class="card-title text-center">Gestión de Finanzas</h5>
                    <div class="d-flex justify-content-around">
                        <!-- Registro de Ingresos -->
                        <div class="card text-white bg-success mb-3" style="max-width: 18rem;">
                            <div class="card-header">Registro de Ingresos</div>
                            <div class="card-body">
                                <h5 class="card-title">Ingresos Mensuales</h5>
                                <p class="card-text">Registra los ingresos provenientes de consultas, tratamientos y otros servicios.</p>
                                <a href="/Finanzas/RegistrarIngreso" class="btn btn-light">Registrar Ingreso</a>
                            </div>
                        </div>

                        <!-- Registro de Egresos -->
                        <div class="card text-white bg-danger mb-3" style="max-width: 18rem;">
                            <div class="card-header">Registro de Egresos</div>
                            <div class="card-body">
                                <h5 class="card-title">Egresos Mensuales</h5>
                                <p class="card-text">Registra los egresos de la clínica como pagos a proveedores, sueldos, mantenimiento, etc.</p>
                                <a href="/Finanzas/RegistrarEgreso" class="btn btn-light">Registrar Egreso</a>
                            </div>
                        </div>

                        <!-- Generar Reportes -->
                        <div class="card text-white bg-warning mb-3" style="max-width: 18rem;">
                            <div class="card-header">Generar Reportes</div>
                            <div class="card-body">
                                <h5 class="card-title">Reportes Financieros</h5>
                                <p class="card-text">Genera reportes detallados sobre los ingresos y egresos de la clínica.</p>
                                <a href="/Finanzas/GenerarReporte" class="btn btn-light">Generar Reporte</a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Generar Proforma -->
    <!-- Botón para abrir el formulario de creación de proforma -->
    <div class="row mb-4">
        <div class="col-md-12">
            <div class="card shadow-sm">
                <div class="card-body text-center">
                    <h5 class="card-title">Crear Proforma</h5>
                    <!-- Botón para abrir el formulario de proforma -->
                    <button type="button" class="btn btn-success" data-bs-toggle="modal" data-bs-target="#crearProformaModal">
                        <i class="bi bi-file-earmark-plus"></i> Crear Proforma
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal para crear la proforma -->
    <div class="modal fade" id="crearProformaModal" tabindex="-1" aria-labelledby="crearProformaModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="crearProformaModalLabel">Crear Proforma</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Cerrar"></button>
                </div>
                <div class="modal-body">
                    <!-- Formulario de creación de proforma -->
                    <form id="formProforma">
                        <div class="mb-3">
                            <label for="nombre" class="form-label">Nombre</label>
                            <input type="text" class="form-control" id="nombre" required>
                        </div>
                        <div class="mb-3">
                            <label for="apellido" class="form-label">Apellido</label>
                            <input type="text" class="form-control" id="apellido" required>
                        </div>
                        <div class="mb-3">
                            <label for="descuento" class="form-label">Descuento (%)</label>
                            <input type="number" class="form-control" id="descuento" min="0" max="100">
                        </div>
                        <div class="mb-3">
                            <label for="articulo" class="form-label">Artículo</label>
                            <input type="text" class="form-control" id="articulo" required>
                        </div>
                        <div class="mb-3">
                            <label for="Servicio" class="form-label">Servicio</label>
                            <input type="text" class="form-control" id="Servicio" required>
                        </div>
                        <div class="mb-3">
                            <label for="precio" class="form-label">Precio</label>
                            <input type="number" class="form-control" id="precio" required>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cerrar</button>
                    <button type="submit" class="btn btn-primary" id="guardarProforma">Guardar Proforma</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Botón para abrir el formulario de crear transacción -->
    <div class="row mb-4">
        <div class="col-md-12">
            <div class="card shadow-sm">
                <div class="card-body text-center">
                    <h5 class="card-title">Crear Transacción</h5>
                    <!-- Botón para abrir el formulario de transacción -->
                    <button type="button" class="btn btn-info" data-bs-toggle="modal" data-bs-target="#crearTransaccionModal">
                        <i class="bi bi-file-earmark-plus"></i> Crear Transacción
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal para crear la transacción -->
    <div class="modal fade" id="crearTransaccionModal" tabindex="-1" aria-labelledby="crearTransaccionModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="crearTransaccionModalLabel">Crear Transacción</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Cerrar"></button>
                </div>
                <div class="modal-body">
                    <!-- Formulario de creación de transacción -->
                    <form id="formTransaccion">
                        <div class="mb-3">
                            <label for="fecha" class="form-label">Fecha</label>
                            <input type="date" class="form-control" id="fecha" required>
                        </div>
                        <div class="mb-3">
                            <label for="descripcion" class="form-label">Descripción</label>
                            <input type="text" class="form-control" id="descripcion" required>
                        </div>
                        <div class="mb-3">
                            <label for="tipo" class="form-label">Tipo de Transacción</label>
                            <select class="form-select" id="tipo" required>
                                <option value="">Selecciona el tipo</option>
                                <option value="Ingreso">Ingreso</option>
                                <option value="Egreso">Egreso</option>
                            </select>
                        </div>
                        <div class="mb-3">
                            <label for="monto" class="form-label">Monto</label>
                            <input type="number" class="form-control" id="monto" required>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cerrar</button>
                    <button type="submit" class="btn btn-primary" id="guardarTransaccion">Guardar Transacción</button>
                </div>
            </div>
        </div>
    </div>


    <!-- Listado de Ingresos y Egresos Recientes -->
    <section class="py-5">
        <div class="container">
            <h2 class="text-center mb-4">Transacciones Recientes</h2>
            <table class="table table-striped table-bordered">
                <thead>
                    <tr>
                        <th>Fecha</th>
                        <th>Descripción</th>
                        <th>Tipo</th>
                        <th>Monto</th>
                        <th>Acciones</th>
                    </tr>
                </thead>
                <tbody>
                    <!-- Ejemplo de Transacción -->
                    <tr>
                        <td>2025-03-28</td>
                        <td>Consulta Odontológica - Juan Pérez</td>
                        <td>Ingreso</td>
                        <td>$100.00</td>
                        <td>
                            <a href="/Finanzas/DetallesTransaccion/1" class="btn btn-info btn-sm">Ver Detalles</a>
                            <a href="/Finanzas/EliminarTransaccion/1" class="btn btn-danger btn-sm">Eliminar</a>
                        </td>
                    </tr>
                    <tr>
                        <td>2025-03-27</td>
                        <td>Pago Proveedor - Material Odontológico</td>
                        <td>Egreso</td>
                        <td>$200.00</td>
                        <td>
                            <a href="/Finanzas/DetallesTransaccion/2" class="btn btn-info btn-sm">Ver Detalles</a>
                            <a href="/Finanzas/EliminarTransaccion/2" class="btn btn-danger btn-sm">Eliminar</a>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
    </section>
</div>
