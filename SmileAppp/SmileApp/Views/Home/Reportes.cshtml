@{
    ViewData["Title"] = "Análisis y Reportes";
}

<div class="container-fluid">
    <!-- Encabezado del Módulo -->
    <div class="row mb-5 justify-content-center">
        <div class="col-md-8">
            <div class="card shadow-lg">
                <div class="card-header bg-info text-white text-center py-4">
                    <h1 class="display-4 fw-bold">Módulo de Análisis y Reportes</h1>
                    <p class="lead">Aquí podrás consultar los reportes de análisis de la clínica, incluyendo información detallada sobre pacientes, consultas, tratamientos y KPIs operativos.</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Dashboard de Pacientes -->
    <div class="row mb-4">
        <div class="col-md-6">
            <div class="card shadow-sm">
                <div class="card-body">
                    <h5 class="card-title text-center">Dashboard de Pacientes</h5>
                    <canvas id="patientsChart" height="300"></canvas>
                </div>
            </div>
        </div>

        <!-- Dashboard de Consultas -->
        <div class="col-md-6">
            <div class="card shadow-sm">
                <div class="card-body">
                    <h5 class="card-title text-center">Dashboard de Consultas</h5>
                    <canvas id="consultationsChart" height="300"></canvas>
                </div>
            </div>
        </div>
    </div>

    <!-- Dashboard de Tratamientos -->
    <div class="row mb-4">
        <div class="col-md-6">
            <div class="card shadow-sm">
                <div class="card-body">
                    <h5 class="card-title text-center">Dashboard de Tratamientos</h5>
                    <canvas id="treatmentsChart" height="300"></canvas>
                </div>
            </div>
        </div>

        <!-- Dashboard de KPI's Operativos -->
        <div class="col-md-6">
            <div class="card shadow-sm">
                <div class="card-body">
                    <h5 class="card-title text-center">Dashboard de KPI's Operativos</h5>
                    <canvas id="kpiChart" height="300"></canvas>
                </div>
            </div>
        </div>
    </div>

</div>

<!-- Scripts para los Gráficos -->
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>
    // Datos para el Dashboard de Pacientes
    var patientsChartCtx = document.getElementById('patientsChart').getContext('2d');
    var patientsChart = new Chart(patientsChartCtx, {
        type: 'bar',
        data: {
            labels: ['Juan Pérez', 'Ana Gómez', 'Carlos Martínez', 'Laura López', 'Pedro Fernández'],
            datasets: [{
                label: 'Número de Consultas',
                data: [5, 3, 8, 2, 7],
                backgroundColor: 'rgba(54, 162, 235, 0.2)',
                borderColor: 'rgba(54, 162, 235, 1)',
                borderWidth: 1
            }]
        },
        options: {
            responsive: true,
            scales: {
                y: {
                    beginAtZero: true
                }
            }
        }
    });

    // Datos para el Dashboard de Consultas
    var consultationsChartCtx = document.getElementById('consultationsChart').getContext('2d');
    var consultationsChart = new Chart(consultationsChartCtx, {
        type: 'line',
        data: {
            labels: ['Ene', 'Feb', 'Mar', 'Abr', 'May'],
            datasets: [{
                label: 'Consultas Mensuales',
                data: [120, 150, 200, 180, 210],
                borderColor: 'rgba(75, 192, 192, 1)',
                backgroundColor: 'rgba(75, 192, 192, 0.2)',
                fill: true,
                tension: 0.1
            }]
        },
        options: {
            responsive: true,
            scales: {
                y: {
                    beginAtZero: true
                }
            }
        }
    });

    // Datos para el Dashboard de Tratamientos
    var treatmentsChartCtx = document.getElementById('treatmentsChart').getContext('2d');
    var treatmentsChart = new Chart(treatmentsChartCtx, {
        type: 'pie',
        data: {
            labels: ['Ortodoncia', 'Endodoncia', 'Implantes', 'Limpieza'],
            datasets: [{
                label: 'Tratamientos Realizados',
                data: [40, 30, 20, 10],
                backgroundColor: ['rgba(255, 99, 132, 0.2)', 'rgba(54, 162, 235, 0.2)', 'rgba(255, 206, 86, 0.2)', 'rgba(75, 192, 192, 0.2)'],
                borderColor: ['rgba(255, 99, 132, 1)', 'rgba(54, 162, 235, 1)', 'rgba(255, 206, 86, 1)', 'rgba(75, 192, 192, 1)'],
                borderWidth: 1
            }]
        },
        options: {
            responsive: true
        }
    });

    // Datos para el Dashboard de KPI's Operativos
    var kpiChartCtx = document.getElementById('kpiChart').getContext('2d');
    var kpiChart = new Chart(kpiChartCtx, {
        type: 'radar',
        data: {
            labels: ['Consultas Realizadas', 'Satisfacción del Paciente', 'Tiempo de Espera Promedio', 'Ingreso Promedio por Paciente', 'Número de Emergencias'],
            datasets: [{
                label: 'KPI\'s Operativos',
                data: [80, 90, 75, 70, 85],
                backgroundColor: 'rgba(153, 102, 255, 0.2)',
                borderColor: 'rgba(153, 102, 255, 1)',
                borderWidth: 1
            }]
        },
        options: {
            responsive: true,
            scale: {
                ticks: {
                    beginAtZero: true,
                    max: 100
                }
            }
        }
    });
</script>
