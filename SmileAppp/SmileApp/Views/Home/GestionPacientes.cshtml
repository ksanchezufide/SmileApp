@{
    ViewData["Title"] = "Gestión de Pacientes";
}

<div class="container-fluid">
    <!-- Encabezado del Módulo -->
    <div class="row mb-5 justify-content-center">
        <div class="col-md-8">
            <div class="card shadow-lg">
                <div class="card-header bg-info text-white text-center py-4">
                    <h1 class="display-4 fw-bold">Módulo de Gestión de Pacientes</h1>
                    <p class="lead">Aquí podrás gestionar todos los pacientes registrados en la clínica dental.</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Filtro de Búsqueda de Pacientes -->
    <div class="row mb-4">
        <div class="col-md-12">
            <div class="card shadow-sm">
                <div class="card-body">
                    <h5 class="card-title">Buscar Pacientes</h5>
                    <form class="d-flex">
                        <input type="text" class="form-control" placeholder="Buscar por nombre o ID de paciente..." aria-label="Buscar pacientes" id="searchInput">
                        <button type="submit" class="btn btn-info ms-2">Buscar</button>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <!-- Crear paciente -->
    <div class="row mb-4">
        <div class="col-md-12">
            <div class="card shadow-sm">
                <div class="card-body text-center">
                    <div class="text-center mb-4">
                        <button class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#crearUsuarioModal">
                            Crear Nuevo Usuario
                        </button>
                    </div>

                    <!-- Modal -->
                    <div class="modal fade" id="crearUsuarioModal" tabindex="-1" aria-labelledby="crearUsuarioModalLabel" aria-hidden="true">
                        <div class="modal-dialog modal-lg">
                            <div class="modal-content shadow-lg">
                                <div class="modal-header bg-primary text-white">
                                    <h5 class="modal-title" id="crearUsuarioModalLabel">Crear Nuevo Usuario</h5>
                                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Cerrar"></button>
                                </div>
                                <div class="modal-body">
                                    <form>
                                        <div class="row mb-3">
                                            <div class="col-md-6">
                                                <label for="nombreUsuario" class="form-label">Nombre</label>
                                                <input type="text" class="form-control" id="nombreUsuario" placeholder="Ingrese el nombre">
                                            </div>
                                            <div class="col-md-6">
                                                <label for="apellidoUsuario" class="form-label">Apellido</label>
                                                <input type="text" class="form-control" id="apellidoUsuario" placeholder="Ingrese el apellido">
                                            </div>
                                        </div>
                                        <div class="row mb-3">
                                            <div class="col-md-6">
                                                <label for="emailUsuario" class="form-label">Correo Electrónico</label>
                                                <input type="email" class="form-control" id="emailUsuario" placeholder="usuario@ejemplo.com">
                                            </div>
                                            <div class="col-md-6">
                                                <label for="telefonoUsuario" class="form-label">Teléfono</label>
                                                <input type="tel" class="form-control" id="telefonoUsuario" placeholder="Número de teléfono">
                                            </div>
                                        </div>
                                        <div class="row mb-3">
                                            <div class="col-md-6">
                                                <label for="usuario" class="form-label">Nombre de Usuario</label>
                                                <input type="text" class="form-control" id="usuario" placeholder="Nombre de usuario">
                                            </div>
                                            <div class="col-md-6">
                                                <label for="contrasena" class="form-label">Contraseña</label>
                                                <input type="password" class="form-control" id="contrasena" placeholder="Contraseña">
                                            </div>
                                        </div>
                                        <div class="mb-3">
                                            <label for="rolUsuario" class="form-label">Rol</label>
                                            <select class="form-select" id="rolUsuario">
                                                <option selected disabled>Seleccione un rol</option>
                                                <option value="admin">Administrador</option>
                                                <option value="recepcionista">Recepcionista</option>
                                                <option value="doctor">Doctor</option>
                                            </select>
                                        </div>
                                        <div class="form-check form-switch mb-3">
                                            <input class="form-check-input" type="checkbox" id="estadoUsuario" checked>
                                            <label class="form-check-label" for="estadoUsuario">Usuario Activo</label>
                                        </div>
                                    </form>
                                </div>
                                <div class="modal-footer">
                                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
                                    <button type="button" class="btn btn-success">Guardar Usuario</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Lista de Pacientes -->
    <section class="py-5">
        <div class="container">
            <h2 class="text-center mb-4">Lista de Pacientes</h2>
            <table class="table table-striped table-bordered">
                <thead>
                    <tr>
                        <th>ID</th>
                        <th>Nombre</th>
                        <th>Edad</th>
                        <th>Última Cita</th>
                        <th>Acciones</th>
                    </tr>
                </thead>
                <tbody>
                    <!-- Aquí irían los pacientes dinámicamente -->
                    <tr>
                        <td>001</td>
                        <td>Juan Pérez</td>
                        <td>35</td>
                        <td>2025-03-20</td>
                        <td>
                                <label class="btn btn-success active">
                                    <input type="checkbox" checked autocomplete="off"> Activo
                                </label>
                            
                            <a href="/Pacientes/Detalles/001" class="btn btn-info btn-sm">Detalles</a>
                            <a href="/Pacientes/Editar/001" class="btn btn-warning btn-sm">Editar</a>
                            <a href="/Pacientes/Eliminar" class="btn btn-danger mx-2">Eliminar</a>
                        </td>
                    </tr>
                    <tr>
                        <td>002</td>
                        <td>Ana Gómez</td>
                        <td>28</td>
                        <td>2025-03-18</td>
                        <td>
                            <label class="btn btn-success active">
                                <input type="checkbox" checked autocomplete="off"> Activo
                            </label>

                            <a href="/Pacientes/Detalles/001" class="btn btn-info btn-sm">Detalles</a>
                            <a href="/Pacientes/Editar/001" class="btn btn-warning btn-sm">Editar</a>
                            <a href="/Pacientes/Eliminar" class="btn btn-danger mx-2">Eliminar</a>
                        </td>
                    </tr>
                    <tr>
                        <td>003</td>
                        <td>Carlos Martínez</td>
                        <td>40</td>
                        <td>2025-03-15</td>
                        <td>
                            <label class="btn btn-success active">
                                <input type="checkbox" checked autocomplete="off"> Activo
                            </label>

                            <a href="/Pacientes/Detalles/001" class="btn btn-info btn-sm">Detalles</a>
                            <a href="/Pacientes/Editar/001" class="btn btn-warning btn-sm">Editar</a>
                            <a href="/Pacientes/Eliminar" class="btn btn-danger mx-2">Eliminar</a>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
    </section>
</div>

<!-- Script para Filtrar Pacientes -->
<script>
    // Función para filtrar pacientes por nombre o ID
    document.getElementById('searchInput').addEventListener('input', function () {
        let searchValue = this.value.toLowerCase();
        let rows = document.querySelectorAll('table tbody tr');

        rows.forEach(row => {
            let id = row.cells[0].innerText.toLowerCase();
            let name = row.cells[1].innerText.toLowerCase();
            if (id.includes(searchValue) || name.includes(searchValue)) {
                row.style.display = '';
            } else {
                row.style.display = 'none';
            }
        });
    });
</script>
